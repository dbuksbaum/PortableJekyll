<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">

<title>class Logging::Proxy - logging-2.0.0 Documentation</title>

<link type="text/css" media="screen" href="../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
</script>

<script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/darkfish.js"></script>


<body id="top" class="class">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="../index.html">Home</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  

  <div id="file-metadata">
    <nav id="file-list-section" class="section">
  <h3 class="section-header">Defined In</h3>
  <ul>
    <li>lib/logging/proxy.rb
  </ul>
</nav>

    
  </div>

  <div id="class-metadata">
    
    <nav id="parent-class-section" class="section">
  <h3 class="section-header">Parent</h3>
  
  <p class="link"><a href="../Object.html">Object</a>
  
</nav>

    
    
    <!-- Method Quickref -->
<nav id="method-list-section" class="section">
  <h3 class="section-header">Methods</h3>

  <ul class="link-list">
    
    <li ><a href="#method-c-new">::new</a>
    
    <li ><a href="#method-i-method_missing">#method_missing</a>
    
  </ul>
</nav>

  </div>

  <div id="project-metadata">
    <nav id="fileindex-section" class="section project-section">
  <h3 class="section-header">Pages</h3>

  <ul>
  
    <li class="file"><a href="../History_txt.html">History</a>
  
  </ul>
</nav>

    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="../File.html">File</a>
  
    <li><a href="../FileUtils.html">FileUtils</a>
  
    <li><a href="../Logging.html">Logging</a>
  
    <li><a href="../Logging/Appender.html">Logging::Appender</a>
  
    <li><a href="../Logging/Appenders.html">Logging::Appenders</a>
  
    <li><a href="../Logging/Appenders/Buffering.html">Logging::Appenders::Buffering</a>
  
    <li><a href="../Logging/Appenders/File.html">Logging::Appenders::File</a>
  
    <li><a href="../Logging/Appenders/IO.html">Logging::Appenders::IO</a>
  
    <li><a href="../Logging/Appenders/RollingFile.html">Logging::Appenders::RollingFile</a>
  
    <li><a href="../Logging/Appenders/RollingFile/Roller.html">Logging::Appenders::RollingFile::Roller</a>
  
    <li><a href="../Logging/Appenders/Stderr.html">Logging::Appenders::Stderr</a>
  
    <li><a href="../Logging/Appenders/Stdout.html">Logging::Appenders::Stdout</a>
  
    <li><a href="../Logging/Appenders/StringIo.html">Logging::Appenders::StringIo</a>
  
    <li><a href="../Logging/Appenders/Syslog.html">Logging::Appenders::Syslog</a>
  
    <li><a href="../Logging/ColorScheme.html">Logging::ColorScheme</a>
  
    <li><a href="../Logging/Filter.html">Logging::Filter</a>
  
    <li><a href="../Logging/Filters.html">Logging::Filters</a>
  
    <li><a href="../Logging/Filters/Level.html">Logging::Filters::Level</a>
  
    <li><a href="../Logging/Layout.html">Logging::Layout</a>
  
    <li><a href="../Logging/Layouts.html">Logging::Layouts</a>
  
    <li><a href="../Logging/Layouts/Basic.html">Logging::Layouts::Basic</a>
  
    <li><a href="../Logging/Layouts/Parseable.html">Logging::Layouts::Parseable</a>
  
    <li><a href="../Logging/Layouts/Parseable/layout;.html">Logging::Layouts::Parseable::layout;</a>
  
    <li><a href="../Logging/Layouts/Pattern.html">Logging::Layouts::Pattern</a>
  
    <li><a href="../Logging/Logger.html">Logging::Logger</a>
  
    <li><a href="../Logging/Logger.html">Logging::Logger</a>
  
    <li><a href="../Logging/MappedDiagnosticContext.html">Logging::MappedDiagnosticContext</a>
  
    <li><a href="../Logging/NestedDiagnosticContext.html">Logging::NestedDiagnosticContext</a>
  
    <li><a href="../Logging/Proxy.html">Logging::Proxy</a>
  
    <li><a href="../Logging/RailsCompat.html">Logging::RailsCompat</a>
  
    <li><a href="../Logging/Repository.html">Logging::Repository</a>
  
    <li><a href="../Logging/Repository/Singleton.html">Logging::Repository::Singleton</a>
  
    <li><a href="../Logging/RootLogger.html">Logging::RootLogger</a>
  
    <li><a href="../Logging/logger.html">Logging::logger</a>
  
    <li><a href="../Module.html">Module</a>
  
    <li><a href="../Object.html">Object</a>
  
    <li><a href="../RSpec.html">RSpec</a>
  
    <li><a href="../RSpec/Core.html">RSpec::Core</a>
  
    <li><a href="../RSpec/Core/Configuration.html">RSpec::Core::Configuration</a>
  
    <li><a href="../RSpec/LoggingHelper.html">RSpec::LoggingHelper</a>
  
    <li><a href="../RSpec/LoggingHelper.html">RSpec::LoggingHelper</a>
  
    <li><a href="../ReentrantMutex.html">ReentrantMutex</a>
  
    <li><a href="../Spec.html">Spec</a>
  
    <li><a href="../Spec/Runner.html">Spec::Runner</a>
  
    <li><a href="../Spec/Runner/Configuration.html">Spec::Runner::Configuration</a>
  
    <li><a href="../String.html">String</a>
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation">
  <h1 class="class">class Logging::Proxy</h1>

  <div id="description" class="description">
    
<p>Defines a <a href="Proxy.html">Proxy</a> that will log all method calls on
the proxied object. This class uses <code>method_missing</code> on a “blank
slate” object to intercept all method calls. The method name being called
and the arguments are all logged to the proxied object&#39;s logger
instance. The log level and other settings for the proxied object are
honored by the <a href="Proxy.html">Proxy</a> instance.</p>

<p>If you want, you can also supply your own <code>method_missing</code> code
as a block to the constructor.</p>

<pre class="ruby"><span class="ruby-constant">Proxy</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">object</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span><span class="ruby-operator">|</span>
  <span class="ruby-comment"># code to be executed before the proxied method</span>
  <span class="ruby-identifier">result</span> = <span class="ruby-ivar">@object</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">name</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-comment"># code to be executed after the proxied method</span>
  <span class="ruby-identifier">result</span>   <span class="ruby-comment"># &lt;-- always return the result</span>
<span class="ruby-keyword">end</span>
</pre>

<p>The proxied object is available as the “@object” variable. The logger is
available as the “@logger” variable.</p>

  </div><!-- description -->

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    <!-- Methods -->
    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Class Methods</h3>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">( object, &block )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Create a new proxy for the given <em>object</em>. If an optional
<em>block</em> is given it will be called before the proxied method. This
<em>block</em> will replace the <code>method_missing</code> implementation</p>
          
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File lib/logging/proxy.rb, line 35</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>( <span class="ruby-identifier">object</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span> )
  <span class="ruby-constant">Kernel</span>.<span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;Cannot proxy nil&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-keyword">nil</span>.<span class="ruby-identifier">equal?</span> <span class="ruby-identifier">object</span>

  <span class="ruby-ivar">@object</span> = <span class="ruby-identifier">object</span>
  <span class="ruby-ivar">@leader</span> = <span class="ruby-ivar">@object</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Class</span>) <span class="ruby-operator">?</span> <span class="ruby-node">&quot;#{@object.name}.&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-node">&quot;#{@object.class.name}#&quot;</span>
  <span class="ruby-ivar">@logger</span> = <span class="ruby-constant">Logging</span>.<span class="ruby-identifier">logger</span>[<span class="ruby-identifier">object</span>]

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">block</span>
    <span class="ruby-identifier">eigenclass</span> = <span class="ruby-keyword">class</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-keyword">self</span>; <span class="ruby-keyword">self</span>; <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">eigenclass</span>.<span class="ruby-identifier">__send__</span>(<span class="ruby-value">:define_method</span>, <span class="ruby-value">:method_missing</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- new-source -->
          
        </div>

        

        
      </div><!-- new-method -->

    
    </section><!-- public-class-method-details -->
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Instance Methods</h3>

    
      <div id="method-i-method_missing" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">method_missing</span><span
            class="method-args">( name, *args, &block )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>All hail the magic of method missing. Here is where we are going to log the
method call and then forward to the proxied object. The return value from
the proxied objet method call is passed back.</p>
          
          

          
          <div class="method-source-code" id="method_missing-source">
            <pre><span class="ruby-comment"># File lib/logging/proxy.rb, line 52</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">method_missing</span>( <span class="ruby-identifier">name</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span> )
  <span class="ruby-ivar">@logger</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#@leader#{name}(#{args.inspect[1..-2]})\n&quot;</span>
  <span class="ruby-ivar">@object</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">name</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- method_missing-source -->
          
        </div>

        

        
      </div><!-- method_missing-method -->

    
    </section><!-- public-instance-method-details -->
  
  </section><!-- 5Buntitled-5D -->

</div><!-- documentation -->


<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 4.0.0.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

